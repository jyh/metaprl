#
# Go ahead and assume that we have MC.  There's no
# other way this Conscript should be called.
#
Import qw( env );

#
# Clone the environment and modify as needed.
#
$env = $env->clone(
   INCPATH  => [@{$env->{INCPATH}}, "#mllib",
               "#refiner/refbase", "#refiner/refsig", "#refiner/term_gen",
               "#refiner/term_ds", "#refiner/term_std", "#refiner/rewrite",
               "#refiner/refiner", "#refiner/reflib", "#library", "#ensemble",
               "#filter/boot", "#filter/base", "#filter/filter",
               "#theories/tactic", "#theories/ocaml", "#theories/base",
               "#theories/itt", "#theories/mc",
               "$env->{MC}/lib/naml/stdlib",
               "$env->{MC}/lib/util",
               "$env->{MC}/lib/cutil",
               "$env->{MC}/fir/type",
               "$env->{MC}/fir/util",
               "$env->{MC}/fir/opt"],
      OCAMLLINK => "$env->{OCAMLLINK} -I /usr/lib/camlp4",
      OCAMLCFLAGS => "-thread",
      MLLIBS    => "unix.cmxa threads.cmxa odyl.cmxa camlp4.cmxa pa_o.cmx",
      CCLIBS    => "-cclib clib/clib.a -cclib $env->{MC}/lib/cutil/libcutil.a"
   );

#
# Declare source(s) and the program.
#
OCamlSources $env
   'mp_mc_test_connect_base.ml',
   'mp_mc_test_connect_ty.ml',
   'mp_mc_test_connect_exp.ml',
   'mp_mc_test_connect.ml';

OCamlProgram $env 'test_connect.exec',
   'mp_mc_test_connect';

#
# What to build.
#
Default qw( test_connect.exec );
