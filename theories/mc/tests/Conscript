#
# Go ahead and assume that we have MC.  There's no
# other way this Conscript should be called.
#
Import qw( env );

#
# Clone the environment and modify as needed.
#
$env = $env->clone(
   INCPATH  => [@{$env->{INCPATH}}, "$env->{MP_HASH}/theories/mc", $env->{CAMLP4STDLIB}],
      OCAMLLINK => "$env->{OCAMLLINK} -I $env->{CAMLP4STDLIB}",
      OCAMLCFLAGS => "-thread",
      MLLIBS    => "unix$env->{SUFLIB} threads$env->{SUFLIB} odyl$env->{SUFLIB} camlp4$env->{SUFLIB} pa_o$env->{SUFOBJ}",
      CCLIBS    => "-cclib $env->{MP}/clib/clib.a -cclib $env->{MC}/lib/cutil/libcutil.a"
   );

#
# Declare source(s) and the program.
#
OCamlSources $env
   'mp_mc_test_connect_base.ml',
   'mp_mc_test_connect_ty.ml',
   'mp_mc_test_connect_exp.ml',
   'mp_mc_test_connect.ml',
   'mp_mc_test.ml';

OCamlProgram $env 'test_connect.exec',
   'mp_mc_test_connect';

OCamlProgram $env 'test.exec',
   'mp_mc_test';

#
# What to build.
#
Default qw( test.exec test_connect.exec );
